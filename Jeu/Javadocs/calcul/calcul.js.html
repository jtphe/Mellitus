<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: calcul.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: calcul.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* La dose initial est calculé avec le poid du patient, 1 unité pour 10 kg.
Si le patient pèse 80 kg, la première dose sera de 8 unité.

La dose théorique à atteindre est égale à 0.4 x le poid du patient, pour 80 kg en théorie la dose à atteindre sera de 32 unité,
mais le patient ne peut pas passer de 8 à 32 unité d’un coup, l’augmentation doit être graduel.
Celle-ci dépend de la dose théorique si elle est supérieur à 15 unité l’augmentation se fera 2 unité par 2 unités
sinon elle se fera 1 unité par 1 unité.
*/

const calcul = require('./calcul.js');

/** Fonction qui calcul la dose de glycémie à prendre
 * @param {Object} partie - Objet json de la partie
 * @param {number} partie.poids - Poids du personnage
 * @return {number} doseGlycemie - La dose de glycémie
 */
exports.doses = function doses(partie) {
	const doseInit = partie.poids / 10;
	const doseObj = 0.4 * partie.poids;
	let augmentation = 0;

	if(doseObj &lt; 15)
		augmentation = 1
	else
		augmentation = 2

	const doseGlycemie = [doseInit, doseObj, augmentation];
	return doseGlycemie;
};

/** Fonction qui calcul la dose de glycémie du matin
 * @param {Object} partie - Objet json de la partie
 * @param {number} partie.tabGlycemie - Tableau contenant tous les taux de glycémie
 * @param {number} partie.glycemie - Taux de glycémie actuelle
 * @return {number} doseGlycemie - La dose de glycémie
 */
exports.glyMatin = function glyMatin(partie) {
	let tauxAvantHier = 0;
	if(partie.tabGlycemie.length > 4)
		tauxAvantHier = partie.tabGlycemie[partie.tabGlycemie.length - 6];
	else
		tauxAvantHier = partie.tabGlycemie[0];

	const tauxHier = partie.glycemie;
	let res = 0;

	if(tauxHier > 1.3 || tauxHier &lt; 0.7) {
		res = partie.tabGlycemie[0] + (Math.round(Math.abs(tauxAvantHier - tauxHier) * 100) / 100) * 0.2;
	}
	else{
		res = partie.tabGlycemie[0] + (tauxHier - 1.3);
	}

	partie.glycemie = res;
	partie.tabGlycemie.push(res);
};

/** Fonction qui calcul la glycémie lente
 * @param {Object} partie - Objet json de la partie
 * @param {number} partie.tabGlycemie - Tableau contenant tous les taux de glycémie
 * @param {number} partie.glycemie - Taux de glycémie actuelle
 * @param {number} dose - La dose d'insuline que l'on prend
 */
exports.glyInsu = function glyInsu(partie, dose) {
	const tauxInit = partie.tabGlycemie[0];
	const tauxPresent = partie.glycemie;
	let res = 0;

	const delta = Math.abs(tauxInit - 1.3);
	const effect = delta / calcul.doses(partie)[1];

	res = Math.round((tauxPresent - Math.abs(dose * effect)) * 100) / 100;

	if(res &lt; 0)
		res = 0;

	partie.glycemie = res;
	partie.tabGlycemie.push(res);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#doses">doses</a></li><li><a href="global.html#glyInsu">glyInsu</a></li><li><a href="global.html#glyMatin">glyMatin</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Dec 13 2018 15:00:28 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
